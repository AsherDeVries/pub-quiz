{"version":3,"sources":["../../../src/websockets/start-quiznight/accept-teams.js"],"names":["socket","on","ACCEPT_TEAM","message","accepted","update","_id","quiznight","$pull","teams","teamName","then","webSocketServer","to","socket_id","emit","PENDING","id"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;AACA;;;;;;kBAEe,UAACA,MAAD,EAAY;AACzBA,SAAOC,EAAP,CAAU,wBAAcC,WAAxB,EAAqC,UAACC,OAAD,EAAa;AAChD,QAAG,CAACA,QAAQC,QAAZ,EAAsB;AACpB,0BAAUC,MAAV,CACE,EAAEC,KAAKH,QAAQI,SAAf,EADF,EAEE,EAAEC,OAAO,EAAEC,OAAO,EAAEH,KAAKH,QAAQO,QAAf,EAAT,EAAT,EAFF,EAGEC,IAHF,CAGO,YAAM;AACX,sBAAIC,eAAJ,CAAoBC,EAApB,CAAuBV,QAAQW,SAA/B,EAA0CC,IAA1C,CAA+C,wBAAcC,OAA7D,EAAsE,gDAAtE;AACA,sBAAIJ,eAAJ,CAAoBC,EAApB,CAAuBb,OAAOiB,EAA9B,EAAkCF,IAAlC,CAAuC,wBAAcC,OAArD,EAA8D,gDAA9D;AACD,OAND;AAOD;AACF,GAVD;AAWD,C","file":"accept-teams.js","sourcesContent":["import app from '../../app';\nimport Quiznight from '../../models/Quiznight';\nimport { socketIO } from '../server';\nimport MESSAGE_TYPES from '../constants/message_types';\n\nexport default (socket) => {  \n  socket.on(MESSAGE_TYPES.ACCEPT_TEAM, (message) => {\n    if(!message.accepted) {\n      Quiznight.update(\n        { _id: message.quiznight },\n        { $pull: { teams: { _id: message.teamName } } }\n      ).then(() => {\n        app.webSocketServer.to(message.socket_id).emit(MESSAGE_TYPES.PENDING, \"You have been rejected to join this quiznight.\");\n        app.webSocketServer.to(socket.id).emit(MESSAGE_TYPES.PENDING, \"You have been rejected to join this quiznight.\");\n      });\n    }\n  });\n}"]}