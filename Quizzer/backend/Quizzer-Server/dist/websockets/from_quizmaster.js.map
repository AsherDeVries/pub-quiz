{"version":3,"sources":["../../src/websockets/from_quizmaster.js"],"names":["socket","quizmaster_credentials","on","credentials","username","password","quiznightCode","generate","length","charset","qn","_id","teams","rounds","save","err","emit"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;kBAEe,UAACA,MAAD,EAASC,sBAAT,EAAoC;AACjDD,SAAOE,EAAP,CAAU,oBAAV,EAAgC,UAACC,WAAD,EAAiB;AAC/C,QAAGA,YAAYC,QAAZ,KAAyBH,uBAAuBG,QAAhD,IACAD,YAAYE,QAAZ,KAAyBJ,uBAAuBI,QADnD,EAC6D;AAC3D,UAAIC,gBAAgB,uBAAaC,QAAb,CAAsB;AACxCC,gBAAQ,CADgC;AAExCC,iBAAS;AAF+B,OAAtB,CAApB;AAIA,UAAIC,KAAK,wBAAc;AACrBC,aAAKL,aADgB;AAErBM,eAAO,EAFc;AAGrBC,gBAAQ;AAHa,OAAd,CAAT;;AAMAH,SAAGI,IAAH,CAAQ,UAACC,GAAD,EAAS;AACf,YAAGA,GAAH,EAAQ;AACNf,iBAAOgB,IAAP,CAAY,SAAZ,EAAuB,uEAAuED,GAA9F;AACD,SAFD,MAEO;AACLf,iBAAOgB,IAAP,CAAY,SAAZ,wEAA2FV,aAA3F;AACD;AACF,OAND;AAOD,KAnBD,MAmBO;AACLN,aAAOgB,IAAP,CAAY,eAAZ,EAA6B,mBAA7B;AACD;AACF,GAvBD;AAwBD,C","file":"from_quizmaster.js","sourcesContent":["import randomstring from 'randomstring';\nimport Quiznight from '../models/Quiznight';\n\nexport default (socket, quizmaster_credentials) => {\n  socket.on('CONNECT_QUIZMASTER', (credentials) => {\n    if(credentials.username === quizmaster_credentials.username && \n       credentials.password === quizmaster_credentials.password) {\n      let quiznightCode = randomstring.generate({\n        length: 6,\n        charset: 'alphanumeric'\n      });\n      let qn = new Quiznight({\n        _id: quiznightCode,\n        teams: [],\n        rounds: []\n      });\n  \n      qn.save((err) => {\n        if(err) {\n          socket.emit('PENDING', 'A quiznight could not be created because of the following reason: ' + err)\n        } else {\n          socket.emit('PENDING', `Welcome quizmaster!, a quiznight has been created with the code: ${quiznightCode}`);\n        }\n      });\n    } else {\n      socket.emit('SIGN_UP_ERROR', 'Wrong credentials');\n    }\n  });\n}"]}